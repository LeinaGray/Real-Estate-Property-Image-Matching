<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="style\base.css">
    <link rel="stylesheet" href="style\components\PieChart.css">
    <link rel="stylesheet" href="style\components\Table.css">
</head>
<body>
    <!-- <div class="container justify-content-center  ">
        <div class="row">
          <h5>Total Number of Images</h5>
          <h1 class = "title" id="totalImages">0 Images</h1>
        </div>
        <div class="row">
          <div class="col-sm metric-card r">
            <div class = "row-sm">
                <div id="copyrightPercentage"  class="pie animate" style="--p:10;--c:rgb(234, 18, 108); --b:8px;"> 90%</div>
            </div>
            <div class = "row">
              <h3 class = "pie-label text-center">Copyright Images</h3>
              <p id="copyrightCount" class = "pie-label text-center">0 out of 100 images are copyrighted</p>
            </div>
          </div>
          <div class="col-sm metric-card r">
            <div class = "row-sm">
                <div id="aiPercentage" class="pie animate" style="--p:10;--c:rgb(234, 18, 148); --b:8px;"> 0%</div>
            </div>
            <div class = "row">
              <h3 class = "pie-label text-center">AI Generated Images</h3>
              <p id="aiCount" class = "pie-label text-center">0 out of 100 images are AI-generated</p>
            </div>
          </div>
          <div class="col-sm metric-card r">
            <div class = "row-sm">
                <div id="authenticPercentage" class="pie animate" style="--p:10;--c:rgb(234, 18, 191); --b:8px;"> 0%</div>
            </div>
            <div class = "row">
              <h3 class = "pie-label text-center">Authentic Images</h3>
              <p id="authenticCount" class = "pie-label text-center">36 out of 100 images are authentic and personally taken</p>
            </div>
          </div>
          
        </div>
    </div> -->

    <div class="container justify-content-center">
      <div class="row">
          <h5>Total Number of Images</h5>
          <h1 class="title" id="totalImages">0 Images</h1> <!-- Added id here -->
      </div>
      <div class="row">
          <div class="col-sm metric-card r">
              <div class="row-sm">
                  <div id="copyrightPercentage" class="pie animate" style="--p:100;--c:rgb(234, 18, 108); --b:8px;">100%</div>
              </div>
              <div class="row">
                  <h3 class="pie-label text-center">Copyright Images</h3>
                  <p class="pie-label text-center" id="copyrightCount">0 out of 100 images are copyrighted</p>
              </div>
          </div>
          <div class="col-sm metric-card r">
              <div class="row-sm">
                  <div id="aiPercentage" class="pie animate" style="--p:10;--c:rgb(234, 18, 148); --b:8px;">40%</div>
              </div>
              <div class="row">
                  <h3 class="pie-label text-center">AI Generated Images</h3>
                  <p class="pie-label text-center" id="aiCount">0 out of 100 images are AI-generated</p>
              </div>
          </div>
          <div class="col-sm metric-card r">
              <div class="row-sm">
                  <div id="authenticPercentage" class="pie animate" style="--p:10;--c:rgb(234, 18, 191); --b:8px;">0%</div>
              </div>
              <div class="row">
                  <h3 class="pie-label text-center">Authentic Images</h3>
                  <p class="pie-label text-center" id="authenticCount">0 out of 100 images are authentic and personally taken</p>
              </div>
          </div>
      </div>
  </div>

  <div class=" container justify-content-center">
    <div class="row">
      <div class="dropdown">
        <a class="btn btn-secondary dropdown-toggle button" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          Copyright Images Dataset
        </a>
      
        <ul class="dropdown-menu">
          <li><a class="dropdown-item col " href="copyright.html">Copyright Images Dataset</a></li>
          <li><a class="dropdown-item col " href="AIgenerated.html">AI Generated Images Dataset</a></li>
          <li><a class="dropdown-item col " href="authentic.html">Authentic Images Dataset</a></li>
        </ul>
      </div>
    </div>
    
    
  </div>

    <div class="">
      
      <div class="row">

        

          <div class="col-md-offset-1">
            
              <div class="panel">
                
                
                  
                  <div class="panel-body table-responsive">
                    
                      <table class="table">
                          <thead>
                            
                            <tr class = "toptable">
                              <th scope="col" rowspan="2">#</th>
                              <th scope="col" rowspan="2"><b>Photo</b></th>
                              <th colspan="3"><h5>Copyright Infringement Status</h5></th>
                              <th colspan="2"><h5>AI Generated Image Detection Status</h5></th>
                              <th scope="col" rowspan="2">Action</th>
                            </tr>
                            <tr>
                              <th colspan="1"><b>Status</b></th>
                              <!-- <th colspan="1">No. of Red Flags</th> -->
                              <th colspan="1">Watermark</th>
                              <th colspan="1">Exif Data</th>
                              <!-- <th colspan="1">Duplicates Found in Platform</th>
                              <th colspan="1">Duplicates Found in Google</th> -->
                              <th colspan="1"><b>Likely AI-Generated</b></th>
                              <th colspan="1">Real Imge</th>
                            </tr>
                          </thead>
                          <tbody id = "table-body">
                              <!-- <tr>
                                <td>1</td>
                                  <td>
                                      <div class="user_icon">
                                          <img src="https://bestjquery.com/tutorial/table-style/demo11/images/img1.jpg" alt="">
                                      </div>
                                  </td>
                                  <td>Clear</td>
                                  <td>With Watermark</td>
                                  <td>Incomplete</td>
                                  <td>90%</td>
                                  <td>10%</td>
                                  <td>
                                      <ul class="action-list">
                                          <li><a href="#" class="btn btn-success"><i class="fa fa-search">Delete</i></a></li>
                                          <li><a href="#" class="btn btn-primary"><i class="fa fa-pencil-alt">Replace</i></a></li>
                                      </ul>
                                  </td>
                              </tr> -->
                          </tbody>
                      </table>
                  </div>
                  <div class="panel-footer">
                      <div class="row">
                        <nav aria-label="Page navigation example">
                          <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                              <a class="page-link" href="#" tabindex="-1">Previous</a>
                            </li>
                            <li class="page-item"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                              <a class="page-link" href="#">Next</a>
                            </li>
                          </ul>
                        </nav>
                      </div>
                  </div>
              </div>
          </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script>
      // Function to fetch CSV file
      function fetchCSV() {
          return fetch('data/copyright/Exif.csv')
              .then(response => response.text())
              .then(data => {
                  const parsedData = parseCSV(data);
                  populateTable(parsedData);
              })
              .catch(error => console.error('Error fetching CSV:', error));
      }
      
      // Function to parse CSV into an array of objects
      function parseCSV(data) {
          const rows = data.split("\n");
          const headers = rows[0].split(",");
          const parsedData = [];
      
          for (let i = 1; i < rows.length; i++) {
              if (rows[i].trim() !== "") {
                  const values = rows[i].split(",");
                  const rowData = {};
                  headers.forEach((header, index) => {
                      rowData[header.trim()] = values[index].trim();
                  });
                  parsedData.push(rowData);
              }
          }
      
          return parsedData;
      }
      function fixImagePath(path) {
        return path.replace(/^C:\/Users\/lenovo\/OneDrive\/Documents\/PROJECTS\/ALT\/Real-Estate-Image-Matching\//, '');
    }    
      
      // Function to populate table with CSV data
      function populateTable(data) {
          const tableBody = document.getElementById("table-body");
          data.forEach((row, index) => {
              const newRow = document.createElement("tr");
      
              newRow.innerHTML = `
                  <td>${row.ID}</td>
                  <td><img src="${fixImagePath(row['Image Path'])}" alt="Image" width="100"></td>
                  <td>${row["Copyright Status"]}</td>
                  <td>${row["Watermark Status"]}</td>
                  <td>${row["Exif Status"]}</td>
                  <td>${row.AI}%</td>
                  <td>${row.Authentic}%</td>
                  <td>
                      <ul class="action-list">
                          <li><a href="#" class="btn btn-success"><i class="fa fa-search">Delete</i></a></li>
                          <li><a href="#" class="btn btn-primary"><i class="fa fa-pencil-alt">Replace</i></a></li>
                      </ul>
                  </td>
              `;
      
              tableBody.appendChild(newRow);
          });
      }
      
      // Call the function to fetch and display CSV data
      fetchCSV();
      </script>
      <script>
        document.addEventListener("DOMContentLoaded", function() {
          const csvFilePath = 'data/copyright/ExifMetrics.csv';
      
          fetch(csvFilePath)
              .then(response => response.text())
              .then(data => {
                  const rows = data.split("\n").map(row => row.split(","));
                  console.log("CSV Rows:", rows); // Debugging step to check CSV rows
      
                  // Now we expect the first row to contain counts and second row to contain percentages
                  let counts = rows[1].map(value => parseFloat(value) || 0); // Correctly parse even when the value is 0
                  let percentages = rows[2] ? rows[2].map(value => parseFloat(value) || 0) : []; // Fallback for percentages
                  console.log("Counts Array:", counts); // Debugging step to check counts
                  console.log("Percentages Array:", percentages); // Debugging step to check percentages
                  
                  let copyrightCount = counts[0]
                  let aiCount = counts[1]
                  let authenticCount = counts[2]
                  let totalImages = counts[3]
      
                  // Update the HTML with values from CSV
                  document.getElementById("totalImages").textContent = `${totalImages} Images`;
                  document.getElementById("copyrightCount").textContent = `${copyrightCount} out of ${totalImages} images are copyrighted`;
                  document.getElementById("aiCount").textContent = `${aiCount} out of ${totalImages} images are AI-generated`;
                  document.getElementById("authenticCount").textContent = `${authenticCount} out of ${totalImages} images are authentic and personally taken`;

                  let copyrightPercentage = Math.round((copyrightCount / totalImages) * 100)
                  let aiPercentage = Math.round((aiCount / totalImages) * 100)
                  let authenticPercentage = Math.round((authenticCount / totalImages) * 100)

                  document.getElementById("copyrightPercentage").textContent = `${copyrightPercentage}%`;
                  document.getElementById("copyrightPercentage").style.setProperty("--p", `${copyrightPercentage}`);
                  document.getElementById("aiPercentage").textContent = `${aiPercentage}%`;
                  document.getElementById("aiPercentage").style.setProperty("--p", `${aiPercentage}`);
                  document.getElementById("authenticPercentage").textContent = `${authenticPercentage}%`;
                  document.getElementById("authenticPercentage").style.setProperty("--p", `${authenticPercentage}`);
                  
              })
              .catch(error => console.error("Error reading the CSV file:", error));
      });
      
    </script>
    
      
    
</body>
</html>